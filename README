HOW TO BUILD AND RUN THIS PROJECT: 
 

Running Method I: Using Shell Scripts (Recommended!)

*Please make sure you have the T21 folder under ~/, or you may want to change the paths in start_smtp.sh, start_kv.sh and start_ft.sh

(1) Run reset.sh
(2) Run start_smtp.sh
(3) Run start_kv.sh
(4) Run start_ft.sh
(5) Go to 127.0.0.1:5050 for our service

*An admin account has been built in:
	user name: admin@penncloud
	password: admin
	
*By default, a session automatically expires after half an hour

*Delete S_0_0.log, S_0_1.log, S_0_2.log, ..., and Master.log under the "store" folder, if you have run our service before and want a completely new key-value store.

*If you want to upload big files, we recommend using the Running Method II
	
*If you meet any trouble, please feel free to contact with us

	
Running Method II: Customized Running

*Quick guide:

	cd ~/T21/webmail
	make smtp
	./smtp -p 2500
	cd ~/T21/store
	make all
	./MasterNode stores.txt
	./StorageNode stores.txt 0 1
	./StorageNode stores.txt 0 2
	./StorageNode stores.txt 0 0
	./StorageNode stores.txt 1 1
	./StorageNode stores.txt 1 2
	./StorageNode stores.txt 1 0
	./StorageNode stores.txt 2 1
	./StorageNode stores.txt 2 2
	./StorageNode stores.txt 2 0
	cd ~/T21/frontend
	make all
	./load-balancer -p 5050 fservers.txt
	./frontend -p 5000
	./frontend -p 5001
	./frontend -p 5002

1. SMTP server for receiving external emails

(1) cd to the folder called "webmail" under T21
(2) run ./smtp -p 2500
	-p specifies at which port you want to run the SMTP server. Default will be 2500

2. Back-end servers (key-value store master node and storage nodes)

(1) cd to the folder called "store" under T21
(2) To make store clean, you can first delete S_0_0.log, S_0_1.log, S_0_2.log, ..., and Mastet.log if they exist
(3) make MasterNode
(4) make StorageNode
(5) run ./MasterNode -v -p <port number> [stores.txt]
	-v specifies whether to print the debugging messages
	-p specifies at which port you want to run the master node. Default will be 10000
	[stores.txt] is the configuration file for kvstores' clusters
(6) run ./StorageNode -v stores.txt <cluster index> <server index>
	-v specifies whether to print the debugging messages
	[stores.txt] is the configuration file for kvstores' clusters
	<cluster index> is the index of cluster
	<server index> is the index of server in that cluster

3. Front end

(1) cd to the folder called "frontend" under T21
(2) make all
(3) run ./load-balancer -p <port number> -v [fservers.txt]
	-p (required) specifies at which port you want to run the load balancer
	-v specifies whether to print the debugging messages
	[fservers.txt] is the configuration file containing the addresses of all the front-end servers
(4) run ./frontend -p <port number> -k <ip:port> -l <ip:port> -v
	-p (required) specifies at which port you want to run this front-end server
	-k specifies the address of the key-value store master node, default to 127.0.0.1:10000
	-l specifies the address of the load balancer, default to 127.0.0.1:5050
	-v specifies whether to print the debugging messages


